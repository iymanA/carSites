<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AUTOBRO-TRADE — Расчет стоимости автомобиля (клон)</title>
  <link rel="stylesheet" href="./calculator.css">
</head>
<body data-sidebar-edge="left">

  <!-- SIDEBAR (обновлённая версия) -->
  <div class="container">
    <aside id="sidebar" class="sidebar" aria-hidden="true" role="navigation">
    <div class="sidebar-header">

        <h4>AUTO
BRO-TRADE</h4> 
      <button id="closeSidebar" class="close" aria-label="Закрыть меню">×</button>
    </div>

    <div class="sidebar-body">
      <div class="sidebar-intro">
        <nav class="nav-main-sidebar">
        <a class="nav-link nav-link-active" href="/about">О компании</a>
        <a class="nav-link" href="./ScemeWork.html">Схема работы</a>
        <a class="nav-link" href="./calculator.html">Калькулятор</a>
        <a class="nav-link" href="./contacts.html">Контакты</a>
      </nav>
      </div>

      <!-- Дополнительный контент (опционально) -->
      <div style="color:#555;font-size:14px;">
      </div>
    </div>
  </aside>

  <!-- overlay -->
  <div id="overlay" class="overlay" hidden></div>

  <!-- HEADER -->
  <header class="header">
    <div class="container header-container">
      <div class="header-logo">
        <!-- добавил id="burger" для совместимости со скриптом -->
        <button id="burger" class="menu-button burger" aria-controls="sidebar" aria-expanded="false" aria-label="Открыть меню">
          <span class="burger-line"></span>
          <span class="burger-line"></span>
          <span class="burger-line"></span>
        </button>

        <a class="logo-link" href="/">
          <span class="logo-part1">AUTO</span><span class="logo-part2">BRO-TRADE</span>
        </a>
      </div>

     <div class="nav-links">
       <nav class="nav-main" aria-label="Главная навигация">
        <a class="nav-link nav-link-active" href="/about">О компании</a>
        <a class="nav-link" href="./ScemeWork.html">Схема работы</a>
        <a class="nav-link" href="./calculator.html">Калькулятор</a>
        <a class="nav-link" href="./contacts.html">Контакты</a>
      </nav>
     </div>

      <div class="header-contacts">
        <a target="_blank" class="contact-phone" href="tel:79954344777">+7 995 434-47-77</a>
        <a target="_blank" class="contact-whatsapp" href="https://wa.me/79954344777" aria-label="WhatsApp">
          <!-- маленькая иконка -->
          <svg width="18" height="18" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.50206 0.25H8.49794C3.94909 0.25 0.25 3.95012 0.25 8.5C0.25 10.3047 0.831625 11.9774 1.82059 13.3355L0.792438 16.4004L3.96353 15.3867C5.26806 16.2509 6.82422 16.75 8.50206 16.75C13.0509 16.75 16.75 13.0488 16.75 8.5C16.75 3.95116 13.0509 0.25 8.50206 0.25Z" fill="#fff"/></svg>
        </a>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero">
    <div class="container">
      <h1>РАСЧЕТ СТОИМОСТИ <span style="font-weight:400">АВТОМОБИЛЯ</span></h1>
    </div>
  </section>

  <!-- MAIN: калькулятор -->
  <main class="calc-wrap">
    <div class="container">
      <div class="calc-inner">
        <div class="left-column">
          <div class="field">
            <div class="label">Введите курс валюты</div>
            <div class="pill"><input id="rate" type="number" value="0" min="0" step="0.01"><div class="symbol">₽</div></div>
          </div>
          <div class="field">
            <div class="label">Цена на аукционе</div>
            <div class="pill"><input id="auction" type="number" value="0" min="0" step="1"><div class="symbol">₽</div></div>
          </div>
          <div class="field">
            <div class="label">Пошлина + УС*</div>
            <div class="pill"><input id="fees" type="number" value="0" min="0" step="1"><div class="symbol">₽</div></div>
            <div class="small-legal">* Рассчитать можно на таможенном калькуляторе.</div>
          </div>
        </div>

        <div class="middle-column">
          <div class="label">Доп. услуги</div>
          <div class="services">
            <label><input id="s1" type="checkbox"><span>Перегон в ТК</span></label>
            <label><input id="s2" type="checkbox"><span>Перегон на стоянку</span></label>
            <label><input id="s3" type="checkbox"><span>Отправка документов экспресс-почтой</span></label>
            <label><input id="s4" type="checkbox"><span>Терминал ГЛОНАСС</span></label>
            <label><input id="s5" type="checkbox"><span>Покупка с OnePrice</span></label>
          </div>
        </div>

        <aside class="right-column">
          <div class="price" id="total">0 ₽</div>
          <p class="desc">В расчете указана приблизительная стоимость автомобиля до г. Уссурийск. Точную стоимость вы можете уточнить у нашего специалиста</p>
          <a href="#" class="cta">Узнать точную стоимость ➜</a>
        </aside>
      </div>
    </div>
  </main>

  <!-- FOOTER (сокращённо) -->
  <!-- Подключи в <head>: <link rel="stylesheet" href="footer.css"> -->
<footer class="site-footer">
  <div class="wrap">
    <div class="sf-left">
      <div class="sf-logo"><span class="white">AUTO</span><span class="red">BRO-TRADE</span></div>
      <a class="sf-privacy" href="#">Политика конфиденциальности</a>
    </div>

    <nav class="sf-center" aria-label="footer navigation">
      <a href="#">О компании</a>
      <a href="#">Калькулятор</a>
      <a href="#">Схема работы</a>
      <a href="#">Контакты</a>
    </nav>

    <div class="sf-right">
      <div class="sf-socials" aria-hidden="false">
        <!-- Telegram -->
        <a href="#" aria-label="Telegram">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M21 3L3 10.5l3.5 1.2L18 6l-9.5 9.5L9 21l3-6 9-12z"/>
          </svg>
        </a>
        <!-- WhatsApp -->
        <a href="#" aria-label="WhatsApp">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.472-.149-.672.149-.198.297-.768.967-.942 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.607.134-.133.298-.347.447-.52.149-.173.198-.297.298-.495.099-.198.05-.371-.025-.52-.074-.148-.672-1.618-.922-2.22-.242-.58-.487-.5-.672-.51l-.573-.01c-.198 0-.52.074-.792.371s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487  .709.306 1.26.489 1.692.626.71.226 1.356.194 1.866.118.57-.085 1.758-.718 2.006-1.412.248-.695.248-1.29.173-1.412-.074-.121-.272-.198-.57-.347z"/>
            <path d="M12 2C6.48 2 2 6.48 2 12c0 2.11.649 4.06 1.763 5.693L2 22l4.43-1.164C8.11 21.277 10.01 22 12 22c5.52 0 10-4.48 10-10S17.52 2 12 2z" fill-opacity=".15"/>
          </svg>
        </a>
        <!-- YouTube -->
        <a href="#" aria-label="YouTube">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M10 15l5.2-3L10 9v6zM21.5 7.2s-.2-1.6-.8-2.3c-.8-.9-1.7-.9-2.1-1C14.7 3.5 12 3.5 12 3.5h-.1s-2.7 0-6.5.4c-.5 0-1.4.1-2.2 1-.6.7-.8 2.3-.8 2.3S2 9 2 10.8v2.4C2 15 2.7 16.8 2.7 16.8s.2 1.6.8 2.3c.8.9 1.8.9 2.3 1 1.6.2 6.3.4 6.3.4s2.7 0 6.5-.4c.5 0 1.4-.1 2.2-1 .6-.7.8-2.3.8-2.3s.7-2.7.7-4.5V10.8c0-1.8-.7-3.6-.7-3.6z"/>
          </svg>
        </a>
        <!-- VK -->
        <a href="#" aria-label="VK">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M12 2C6.48 2 2 6.48 2 12c0 4.4 3.17 8.07 7.36 8.87.54.1.73-.24.73-.53 0-.26-.01-.95-.01-1.86-2.99.65-3.62-1.44-3.62-1.44-.49-1.25-1.2-1.58-1.2-1.58-.98-.67.07-.66.07-.66 1.08.08 1.65 1.11 1.65 1.11.96 1.65 2.52 1.17 3.14.9.1-.7.37-1.17.68-1.44-2.39-.27-4.9-1.2-4.9-5.35 0-1.18.42-2.14 1.11-2.9-.11-.27-.48-1.36.11-2.83 0 0 .91-.29 2.98 1.11a10.3 10.3 0 0 1 2.71-.36c.92.01 1.85.12 2.71.36 2.07-1.4 2.98-1.11 2.98-1.11.59 1.47.22 2.56.11 2.83.69.76 1.11 1.72 1.11 2.9 0 4.16-2.52 5.08-4.92 5.34.38.33.72.98.72 1.98 0 1.43-.01 2.58-.01 2.93 0 .29.19.64.74.53C18.83 20.07 22 16.4 22 12c0-5.52-4.48-10-10-10z"/>
          </svg>
        </a>
        <!-- Instagram -->
        <a href="#" aria-label="Instagram">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm5 6.2A4.8 4.8 0 1 0 16.8 13 4.8 4.8 0 0 0 12 8.2zm6.5-2.7a1.1 1.1 0 1 1-1.1-1.1 1.1 1.1 0 0 1 1.1 1.1z"/>
            <path d="M12 10.5A1.5 1.5 0 1 1 10.5 12 1.5 1.5 0 0 1 12 10.5z" fill="#fff"/>
          </svg>
        </a>
      </div>

      <div class="sf-address">
        Уссурийск, ул. Краснознаменная, д.198<br>
        "B", 2 этаж, офис 207<br>
        <a class="sf-email" href="mailto:autobro_trade@bk.ru">autobro_trade@bk.ru</a>
      </div>

      <a class="sf-phone" href="tel:+79954344777">+7 995 434-47-77</a>
    </div>
  </div>
</footer>
  </div>

  <!-- ========== JS: калькулятор + сайдбар (focus-trap, swipe, accordion, overlay) ========== -->
  <script>
    // ---------- Calculator logic ----------
    (function(){
      const rate = document.getElementById('rate');
      const auction = document.getElementById('auction');
      const fees = document.getElementById('fees');
      const totalEl = document.getElementById('total');

      function formatRub(n) { return n.toLocaleString('ru-RU') + ' ₽'; }

      function calc() {
        const r = parseFloat(rate.value) || 0;
        const a = parseFloat(auction.value) || 0;
        const f = parseFloat(fees.value) || 0;
        const s1 = document.getElementById('s1').checked ? 5000 : 0;
        const s2 = document.getElementById('s2').checked ? 5000 : 0;
        const s3 = document.getElementById('s3').checked ? 5000 : 0;
        const s4 = document.getElementById('s4').checked ? 5000 : 0;
        const s5 = document.getElementById('s5').checked ? 5000 : 0;
        const services = s1 + s2 + s3 + s4 + s5;
        const base = a * (r || 1);
        const total = Math.round(base + f + services);
        totalEl.textContent = formatRub(total);
      }

      rate.addEventListener('input', calc);
      auction.addEventListener('input', calc);
      fees.addEventListener('input', calc);
      document.querySelectorAll('.services input[type=checkbox]').forEach(ch => ch.addEventListener('change', calc));
      calc();
    })();

    // ---------- Sidebar behaviour ----------
    (function () {
      const burger = document.getElementById('burger') || document.querySelector('.menu-button');
      const sidebar = document.getElementById('sidebar');
      const overlay = document.getElementById('overlay');
      const closeBtn = document.getElementById('closeSidebar');
      const body = document.body;

      // focusable elements selector
      function getFocusable(el) {
        return el.querySelectorAll('a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])');
      }

      function openSidebar() {
        sidebar.classList.add('open');
        overlay.classList.add('show');
        overlay.hidden = false;
        sidebar.setAttribute('aria-hidden', 'false');
        // animate burger
        if (burger) burger.classList.add('is-open');
        if (burger) burger.setAttribute('aria-expanded','true');
        body.classList.add('no-scroll');
        // focus first
        const focusable = getFocusable(sidebar);
        if (focusable.length) focusable[0].focus();
        document.addEventListener('focus', trapFocus, true);
      }

      function closeSidebar() {
        sidebar.classList.remove('open');
        overlay.classList.remove('show');
        overlay.hidden = true;
        sidebar.setAttribute('aria-hidden', 'true');
        if (burger) burger.classList.remove('is-open');
        if (burger) burger.setAttribute('aria-expanded','false');
        body.classList.remove('no-scroll');
        document.removeEventListener('focus', trapFocus, true);
        if (burger) burger.focus();
      }

      function trapFocus(e){
        if (!sidebar.contains(e.target)) {
          e.stopPropagation();
          const focusable = getFocusable(sidebar);
          if (focusable.length) focusable[0].focus();
        }
      }

      if (burger) {
        burger.addEventListener('click', function (e) {
          const expanded = burger.getAttribute('aria-expanded') === 'true';
          if (!expanded) openSidebar(); else closeSidebar();
        });
      }

      if (closeBtn) closeBtn.addEventListener('click', closeSidebar);
      if (overlay) overlay.addEventListener('click', closeSidebar);

      document.addEventListener('keydown', function (e) {
        if (e.key === 'Escape') closeSidebar();

        if (e.key === 'Tab' && sidebar.classList.contains('open')) {
          const focusable = Array.from(getFocusable(sidebar));
          if (!focusable.length) return;
          const first = focusable[0];
          const last = focusable[focusable.length - 1];
          if (e.shiftKey && document.activeElement === first) { e.preventDefault(); last.focus(); }
          else if (!e.shiftKey && document.activeElement === last) { e.preventDefault(); first.focus(); }
        }
      });

      // close on resize to desktop nav
      let resizeTimer = null;
      window.addEventListener('resize', function () {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(function () {
          if (window.innerWidth >= 1280 && sidebar.classList.contains('open')) closeSidebar();
        }, 180);
      });

      // accordion
      document.querySelectorAll('.menu-toggle').forEach(btn => {
        btn.addEventListener('click', function(){
          const expanded = btn.getAttribute('aria-expanded') === 'true';
          const submenu = btn.nextElementSibling;
          if (!submenu) return;
          if (expanded) { submenu.hidden = true; btn.setAttribute('aria-expanded','false'); }
          else { submenu.hidden = false; btn.setAttribute('aria-expanded','true'); }
        });
      });

      // swipe to close (left sidebar)
      (function(){
        let startX=0, startY=0, touching=false;
        sidebar.addEventListener('touchstart', function(e){
          if (e.touches && e.touches.length === 1) { startX = e.touches[0].clientX; startY = e.touches[0].clientY; touching = true; }
        });
        sidebar.addEventListener('touchmove', function(e){
          if (!touching) return;
          const dx = e.touches[0].clientX - startX;
          const dy = e.touches[0].clientY - startY;
          if (Math.abs(dx) > Math.abs(dy) && dx < -40) { closeSidebar(); touching = false; }
        });
        sidebar.addEventListener('touchend', function(){ touching = false; });
      })();

      // Close sidebar when clicking outside (for cases where overlay might be hidden)
      document.addEventListener('click', function(e){
        if (!sidebar.contains(e.target) && !burger.contains(e.target) && sidebar.classList.contains('open')) {
          closeSidebar();
        }
      });
    })();
  </script>

</body>
</html>
